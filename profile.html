<!DOCTYPE html>
<html class="light" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Profile - CJ Travel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
    </style>
</head>
<body class="bg-[#f6f7f8] dark:bg-[#101922] text-[#0d141b] dark:text-white min-h-screen">

<nav class="sticky top-0 z-50 bg-white dark:bg-[#101922] border-b border-gray-200 dark:border-gray-800 p-4">
    <div class="max-w-md mx-auto text-xl font-bold">CJ Travel</div>
</nav>

<main class="pb-24 max-w-md mx-auto w-full p-6">
    <div class="flex flex-col items-center gap-6">
        <div class="flex flex-col items-center gap-4">
            <div id="mainProfilePic" class="w-32 h-32 rounded-full border-4 border-white shadow-md bg-cover bg-center" 
                 style="background-image: url('https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png');">
            </div>
            <div class="text-center">
                <h2 id="userName" class="text-2xl font-bold">Loading...</h2>
                <p id="userEmail" class="text-gray-500 dark:text-gray-400"></p>
            </div>
            <button onclick="window.location.href='edit-profile.html'" class="flex items-center gap-2 px-6 py-2 bg-blue-50 text-blue-600 rounded-xl font-semibold border border-blue-100">
                <span class="material-symbols-outlined text-sm">edit</span> Edit Profile
            </button>
        </div>

        <div class="w-full space-y-2 mt-4">
            <div class="flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm cursor-pointer">
                <div class="flex items-center gap-4">
                    <span class="material-symbols-outlined text-blue-500">calendar_month</span>
                    <span class="font-medium">My Bookings</span>
                </div>
                <span class="material-symbols-outlined text-gray-400">chevron_right</span>
            </div>

            <div class="flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm cursor-pointer">
                <div class="flex items-center gap-4">
                    <span class="material-symbols-outlined text-blue-500">credit_card</span>
                    <span class="font-medium">Payment Methods</span>
                </div>
                <span class="material-symbols-outlined text-gray-400">chevron_right</span>
            </div>

            <div class="flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm cursor-pointer">
                <div class="flex items-center gap-4">
                    <span class="material-symbols-outlined text-blue-500">person_add</span>
                    <span class="font-medium">Invite Friends</span>
                </div>
                <span class="material-symbols-outlined text-gray-400">chevron_right</span>
            </div>

            <div onclick="logoutUser()" class="flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-sm cursor-pointer mt-4">
                <div class="flex items-center gap-4 text-red-500">
                    <span class="material-symbols-outlined">logout</span>
                    <span class="font-medium">Logout</span>
                </div>
                <span class="material-symbols-outlined text-red-200">chevron_right</span>
            </div>
        </div>
    </div>
</main>

<footer class="fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-t border-gray-200 dark:border-gray-800">
    <div class="max-w-md mx-auto flex justify-around p-4">
        <a href="index.html" class="text-gray-400"><span class="material-symbols-outlined">home</span></a>
        <a href="guides.html" class="text-gray-400"><span class="material-symbols-outlined">person_search</span></a>
        <a href="resort.html" class="text-gray-400"><span class="material-symbols-outlined">holiday_village</span></a>
        <a href="profile.html" class="text-blue-500"><span class="material-symbols-outlined" style="font-variation-settings: 'FILL' 1">account_circle</span></a>
    </div>
</footer>

<script>
    // Хуудас ачаалагдах үед шууд ажиллана
    (function() {
        try {
            const data = localStorage.getItem('currentUser');
            if (!data) {
                console.log("No user found, redirecting...");
                window.location.href = 'login.html';
                return;
            }

            const user = JSON.parse(data);
            
            // Элементүүдийг нэрээр нь олж мэдээллийг оноох
            if (user.name) document.getElementById('userName').textContent = user.name;
            if (user.email) document.getElementById('userEmail').textContent = user.email;
            if (user.profilePic) {
                document.getElementById('mainProfilePic').style.backgroundImage = `url('${user.profilePic}')`;
            }
        } catch (e) {
            console.error("Error loading profile:", e);
        }
    })();

    function logoutUser() {
        if(confirm("Гарахдаа итгэлтэй байна уу?")) {
            localStorage.removeItem('currentUser');
            window.location.href = 'login.html';
        }
    }
</script>
</body>
</html>
