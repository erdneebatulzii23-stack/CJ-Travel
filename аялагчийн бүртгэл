<!DOCTYPE html>
<html class="light" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Traveler Registration</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#2b8cee",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101922",
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans"]
                    },
                    borderRadius: { "DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px" },
                },
            },
        }
    </script>
    <style type="text/tailwindcss">
        body { font-family: "Plus Jakarta Sans", sans-serif; min-height: 100dvh; }
        .form-input:focus { border-color: #2b8cee !important; @apply ring-0; }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-[#0d141b] dark:text-slate-100 min-h-screen flex flex-col">

<header class="sticky top-0 z-50 bg-background-light dark:bg-background-dark border-b border-slate-200 dark:border-slate-800">
    <div class="flex items-center p-4 justify-center">
        <h2 class="text-[#0d141b] dark:text-white text-lg font-bold">CJ Travel</h2>
    </div>
</header>

<main class="flex-1 overflow-y-auto pb-24">
    <div class="px-4 pt-6 pb-2">
        <h1 class="text-[#0d141b] dark:text-white text-[32px] font-bold">Traveler Registration</h1>
        <p class="text-[#4c739a] dark:text-slate-400 text-base mt-2">Join our global community of explorers.</p>
    </div>

    <form class="space-y-1" id="regForm">
        <div class="px-4 py-3">
            <label class="flex flex-col">
                <p class="text-base font-medium pb-2">Full Name</p>
                <input id="fullName" class="form-input rounded-lg border-[#cfdbe7] dark:border-slate-700 bg-background-light dark:bg-slate-900 h-14 p-[15px]" placeholder="Enter your full name" type="text"/>
            </label>
        </div>

        <div class="px-4 py-3">
            <label class="flex flex-col">
                <p class="text-base font-medium pb-2">Email Address</p>
                <input id="regEmail" class="form-input rounded-lg border-[#cfdbe7] dark:border-slate-700 bg-background-light dark:bg-slate-900 h-14 p-[15px]" placeholder="example@mail.com" type="email"/>
            </label>
        </div>

        <div class="px-4 py-3">
            <label class="flex flex-col">
                <p class="text-base font-medium pb-2">Date of Birth</p>
                <input id="dob" class="form-input rounded-lg border-[#cfdbe7] dark:border-slate-700 bg-background-light dark:bg-slate-900 h-14 p-[15px]" type="date"/>
            </label>
        </div>

        <div class="px-4 py-3">
            <label class="flex flex-col">
                <p class="text-base font-medium pb-2">Nationality</p>
                <select id="countrySelect" class="form-input rounded-lg border-[#cfdbe7] dark:border-slate-700 bg-background-light dark:bg-slate-900 h-14 p-[15px]">
                    <option disabled selected value="">Select nationality</option>
                </select>
            </label>
        </div>

        <div class="px-4 py-3">
            <label class="flex flex-col">
                <p class="text-base font-medium pb-2">Phone Number</p>
                <input id="phone" class="form-input rounded-lg border-[#cfdbe7] dark:border-slate-700 bg-background-light dark:bg-slate-900 h-14 p-[15px]" placeholder="+976 0000-0000" type="tel"/>
            </label>
        </div>

        <div class="px-4 py-3">
            <label class="flex flex-col relative">
                <p class="text-base font-medium pb-2">Password</p>
                <div class="relative">
                    <input id="regPassword" class="form-input w-full rounded-lg border-[#cfdbe7] dark:border-slate-700 bg-background-light dark:bg-slate-900 h-14 p-[15px] pr-12" placeholder="••••••••" type="password"/>
                    <button type="button" onclick="togglePass('regPassword', this)" class="absolute right-4 top-1/2 -translate-y-1/2 text-slate-400">
                        <span class="material-symbols-outlined">visibility</span>
                    </button>
                </div>
            </label>
        </div>

        <div class="px-4 py-3">
            <label class="flex flex-col relative">
                <p class="text-base font-medium pb-2">Confirm Password</p>
                <div class="relative">
                    <input id="confirmPassword" class="form-input w-full rounded-lg border-[#cfdbe7] dark:border-slate-700 bg-background-light dark:bg-slate-900 h-14 p-[15px] pr-12" placeholder="••••••••" type="password"/>
                    <button type="button" onclick="togglePass('confirmPassword', this)" class="absolute right-4 top-1/2 -translate-y-1/2 text-slate-400">
                        <span class="material-symbols-outlined">visibility</span>
                    </button>
                </div>
            </label>
        </div>
    </form>
</main>

<footer class="fixed bottom-0 left-0 right-0 p-4 bg-background-light dark:bg-background-dark border-t border-slate-200 dark:border-slate-800">
    <div class="flex gap-4 max-w-[480px] mx-auto">
        <button id="backBtn" class="flex-1 h-14 rounded-xl border border-[#cfdbe7] dark:border-slate-700 font-bold bg-white dark:bg-slate-800">Back</button>
        <button id="createBtn" class="flex-1 h-14 rounded-xl bg-primary text-white font-bold shadow-sm">Create Account</button>
    </div>
</footer>

<script>
    // Toggle Password Visibility
    function togglePass(id, btn) {
        const input = document.getElementById(id);
        const icon = btn.querySelector('.material-symbols-outlined');
        if (input.type === 'password') {
            input.type = 'text';
            icon.textContent = 'visibility_off';
        } else {
            input.type = 'password';
            icon.textContent = 'visibility';
        }
    }

    const countries = [
        "Afghanistan", "Albania", "Algeria", "Andorra", "Angola", "Antigua and Barbuda", 
        "Argentina", "Armenia", "Australia", "Austria", "Azerbaijan", "Bahamas", 
        "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium", "Belize", 
        "Benin", "Bhutan", "Bolivia", "Bosnia and Herzegovina", "Botswana", "Brazil", 
        "Brunei", "Bulgaria", "Burkina Faso", "Burundi", "Cabo Verde", "Cambodia", 
        "Cameroon", "Canada", "Central African Republic", "Chad", "Chile", "China", 
        "Colombia", "Comoros", "Congo", "Costa Rica", "Croatia", "Cuba", "Cyprus", 
        "Czech Republic", "Denmark", "Djibouti", "Dominica", "Dominican Republic", 
        "Ecuador", "Egypt", "El Salvador", "Equatorial Guinea", "Eritrea", "Estonia", 
        "Eswatini", "Ethiopia", "Fiji", "Finland", "France", "Gabon", "Gambia", 
        "Georgia", "Germany", "Ghana", "Greece", "Grenada", "Guatemala", "Guinea", 
        "Guyana", "Haiti", "Honduras", "Hungary", "Iceland", "India", "Indonesia", 
        "Iran", "Iraq", "Ireland", "Israel", "Italy", "Jamaica", "Japan", "Jordan", 
        "Kazakhstan", "Kenya", "Kiribati", "Korea, North", "Korea, South", "Kuwait", 
        "Kyrgyzstan", "Laos", "Latvia", "Lebanon", "Lesotho", "Liberia", "Libya", 
        "Liechtenstein", "Lithuania", "Luxembourg", "Madagascar", "Malawi", "Malaysia", 
        "Maldives", "Mali", "Malta", "Marshall Islands", "Mauritania", "Mauritius", 
        "Mexico", "Micronesia", "Moldova", "Monaco", "Mongolia", "Montenegro", 
        "Morocco", "Mozambique", "Myanmar", "Namibia", "Nauru", "Nepal", "Netherlands", 
        "New Zealand", "Nicaragua", "Niger", "Nigeria", "Norway", "Oman", "Pakistan", 
        "Palau", "Panama", "Papua New Guinea", "Paraguay", "Peru", "Philippines", 
        "Poland", "Portugal", "Qatar", "Romania", "Russia", "Rwanda", "Saint Kitts and Nevis", 
        "Saint Lucia", "Samoa", "San Marino", "Saudi Arabia", "Senegal", "Serbia", 
        "Seychelles", "Sierra Leone", "Singapore", "Slovakia", "Slovenia", "Solomon Islands", 
        "Somalia", "South Africa", "Spain", "Sri Lanka", "Sudan", "Suriname", "Sweden", 
        "Switzerland", "Syria", "Taiwan", "Tajikistan", "Tanzania", "Thailand", "Togo", 
        "Tonga", "Trinidad and Tobago", "Tunisia", "Turkey", "Turkmenistan", "Tuvalu", 
        "Uganda", "Ukraine", "United Arab Emirates", "United Kingdom", "United States", 
        "Uruguay", "Uzbekistan", "Vanuatu", "Vatican City", "Venezuela", "Vietnam", 
        "Yemen", "Zambia", "Zimbabwe"
    ];

    const select = document.getElementById('countrySelect');
    if (select) {
        countries.forEach(country => {
            const opt = document.createElement('option');
            opt.value = country;
            opt.textContent = country;
            if (country === "Mongolia") opt.selected = true;
            select.appendChild(opt);
        });
    }

    const createBtn = document.getElementById('createBtn');
    if (createBtn) {
        createBtn.addEventListener('click', (e) => {
            e.preventDefault();
            const pass = document.getElementById('regPassword').value;
            const confirmPass = document.getElementById('confirmPassword').value;

            const userData = {
                name: document.getElementById('fullName').value,
                email: document.getElementById('regEmail').value,
                password: pass,
                dob: document.getElementById('dob').value,
                nationality: document.getElementById('countrySelect').value,
                phone: document.getElementById('phone').value,
                role: 'traveler',
                joinedAt: new Date().toLocaleDateString()
            };

            if(!userData.email || !userData.password || !userData.name) {
                alert("Please fill in your Name, Email, and Password!");
                return;
            }

            if(pass !== confirmPass) {
                alert("Passwords do not match!");
                return;
            }

            let users = JSON.parse(localStorage.getItem('users')) || [];
            if(users.some(u => u.email === userData.email)) {
                alert("This email address is already registered!");
                return;
            }

            users.push(userData);
            localStorage.setItem('users', JSON.stringify(users));
            alert("Account successfully created!");
            window.location.href = "interests.html"; 
        });
    }

    const backBtn = document.getElementById('backBtn');
    if (backBtn) {
        backBtn.addEventListener('click', () => {
            window.location.href = "role-selection.html";
        });
    }
</script>
</body>
</html>
