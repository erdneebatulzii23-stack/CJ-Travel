<!DOCTYPE html>
<html class="light" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Public Profile - CJ Travel</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: { "primary": "#2b8cee" }
                }
            }
        }
    </script>
    <style>
        body { font-family: "Plus Jakarta Sans", sans-serif; }
        .post-card { transition: transform 0.2s; }
        .post-card:active { transform: scale(0.98); }
    </style>
</head>
<body class="bg-[#f6f7f8] dark:bg-[#101922] text-[#0d141b] dark:text-white pb-20">

    <div class="relative h-48 bg-gradient-to-br from-primary to-blue-700">
        <button onclick="history.back()" class="absolute top-4 left-4 bg-white/20 backdrop-blur-md p-2 rounded-full text-white">
            <span class="material-symbols-outlined">arrow_back</span>
        </button>
    </div>

    <div class="max-w-md mx-auto px-4 -mt-16 relative z-10">
        <div class="bg-white dark:bg-gray-900 rounded-3xl p-6 shadow-xl border dark:border-gray-800">
            <div class="flex flex-col items-center text-center">
                <div id="targetProfilePic" class="size-32 rounded-3xl border-4 border-white dark:border-gray-900 shadow-2xl bg-cover bg-center mb-4 bg-gray-200" 
                     style="background-image: url('https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png');">
                </div>
                <h1 id="targetName" class="text-2xl font-black">Loading...</h1>
                <span id="targetRole" class="text-xs font-bold uppercase tracking-widest text-primary bg-primary/10 px-3 py-1 rounded-full mt-1 italic">GUIDE</span>
                
                <p id="targetBio" class="mt-4 text-gray-500 dark:text-gray-400 text-sm leading-relaxed">
                    –ê—è–ª–∞—Ö –¥—É—Ä—Ç–∞–π, –±–∞–π–≥–∞–ª—å–¥ —Ö–∞–π—Ä—Ç–∞–π. –•–∞–º—Ç–¥–∞–∞ –≥–æ—ë –¥—É—Ä—Å–∞–º–∂ –±“Ø—Ç—ç—ç—Ü–≥—ç—ç–µ! üèîÔ∏è‚ú®
                </p>

                <div class="flex gap-3 w-full mt-6">
                    <button class="flex-1 bg-primary text-white font-bold py-3 rounded-2xl shadow-lg shadow-primary/30 flex items-center justify-center gap-2">
                        <span class="material-symbols-outlined text-[20px]">send</span> Message
                    </button>
                    <button class="bg-gray-100 dark:bg-gray-800 p-3 rounded-2xl">
                        <span class="material-symbols-outlined">share</span>
                    </button>
                </div>
            </div>
        </div>

        <div id="createPostArea" class="mt-6 bg-white dark:bg-gray-900 p-4 rounded-2xl border dark:border-gray-800">
            <textarea id="postInput" placeholder="–Æ—É –±–æ–¥–æ–∂ –±–∞–π–Ω–∞?" class="w-full bg-gray-50 dark:bg-gray-800 border-none rounded-xl text-sm focus:ring-primary"></textarea>
            <div class="flex justify-between items-center mt-3">
                <button class="text-gray-500 flex items-center gap-1 text-sm"><span class="material-symbols-outlined">image</span> –ó—É—Ä–∞–≥</button>
                <button onclick="addPost()" class="bg-primary px-4 py-2 text-white text-xs font-bold rounded-lg">–ü–æ—Å—Ç–ª–æ—Ö</button>
            </div>
        </div>

        <div id="postFeed" class="mt-6 space-y-4">
            </div>
    </div>

<script>
    // 1. –•—É—É—Ä–∞–º—á –¥–∞—Ç–∞ (MongoDB-—ç—ç—Å –∏—Ä—ç—Ö —ë—Å—Ç–æ–π)
    let posts = [
        {
            id: 1,
            text: "”®–Ω”©”©–¥”©—Ä –•”©–≤—Å–≥”©–ª –Ω—É—É—Ä “Ø–Ω—ç—Ö—ç—ç—Ä –≥–æ—ë –±–∞–π–Ω–∞! üåä",
            image: "https://images.unsplash.com/photo-1544473244-f6895a69ad41",
            likes: 12,
            comments: [
                { user: "Bat", text: "–Ø–º–∞—Ä –≥–æ—ë —é–º –±—ç!" }
            ],
            time: "2 —Ü–∞–≥–∏–π–Ω ”©–º–Ω”©"
        }
    ];

    // 2. –•—É—É–¥—Å—ã–≥ –∞—á–∞–∞–ª–∞—Ö
    window.onload = () => {
        // URL-–∞–∞—Å —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω ID-–≥ –∞–≤–∞—Ö (–ñ–∏—à—ç—ç: profile.html?id=123)
        const params = new URLSearchParams(window.location.search);
        const userId = params.get('id');
        
        // ”®”©—Ä–∏–π–Ω –ø—Ä–æ—Ñ–∞–π–ª –±–∏—à –±–æ–ª –ø–æ—Å—Ç —Ö–∏–π—Ö —Ö—ç—Å–≥–∏–π–≥ –Ω—É—É—Ö
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (currentUser && userId !== currentUser.id) {
            // document.getElementById('createPostArea').classList.add('hidden');
        }

        renderPosts();
    };

    // 3. –ü–æ—Å—Ç —Ö–∞—Ä—É—É–ª–∞—Ö —Ñ—É–Ω–∫—Ü
    function renderPosts() {
        const feed = document.getElementById('postFeed');
        feed.innerHTML = posts.map(post => `
            <div class="bg-white dark:bg-gray-900 rounded-2xl overflow-hidden border dark:border-gray-800 shadow-sm post-card">
                <div class="p-4 flex items-center justify-between text-xs text-gray-500">
                    <span class="font-bold text-gray-900 dark:text-white">Author Name</span>
                    <span>${post.time}</span>
                </div>
                ${post.image ? `<img src="${post.image}" class="w-full h-64 object-cover">` : ''}
                <div class="p-4">
                    <p class="text-sm dark:text-gray-300">${post.text}</p>
                    
                    <div class="flex items-center gap-6 mt-4 pt-4 border-t dark:border-gray-800">
                        <button onclick="likePost(${post.id})" class="flex items-center gap-1 text-sm hover:text-red-500 transition-colors">
                            <span class="material-symbols-outlined text-[20px]">favorite</span> ${post.likes}
                        </button>
                        <button class="flex items-center gap-1 text-sm">
                            <span class="material-symbols-outlined text-[20px]">chat_bubble</span> ${post.comments.length}
                        </button>
                        <button onclick="sharePost(${post.id})" class="flex items-center gap-1 text-sm ml-auto">
                            <span class="material-symbols-outlined text-[20px]">share</span>
                        </button>
                    </div>

                    <div class="mt-4 space-y-2">
                        ${post.comments.map(c => `<p class="text-[12px]"><span class="font-bold">${c.user}:</span> ${c.text}</p>`).join('')}
                        <input type="text" placeholder="–ö–æ–º–º–µ–Ω—Ç –±–∏—á–∏—Ö..." 
                               class="w-full mt-2 bg-gray-50 dark:bg-gray-800 border-none rounded-lg text-xs"
                               onkeydown="if(event.key==='Enter') addComment(${post.id}, this.value)">
                    </div>
                </div>
            </div>
        `).join('');
    }

    // 4. “Æ–π–ª–¥—ç–ª“Ø“Ø–¥
    function addPost() {
        const input = document.getElementById('postInput');
        if(!input.value) return;
        posts.unshift({
            id: Date.now(),
            text: input.value,
            likes: 0,
            comments: [],
            time: "–î”©–Ω–≥”©–∂ —Å–∞—è"
        });
        input.value = "";
        renderPosts();
    }

    function likePost(id) {
        const post = posts.find(p => p.id === id);
        post.likes++;
        renderPosts();
    }

    function sharePost(id) {
        alert("–õ–∏–Ω–∫–∏–π–≥ —Ö—É—É–ª–ª–∞–∞! –ù–∞–π–∑—É—É–¥ —Ä—É—É–≥–∞–∞ –∏–ª–≥—ç—ç–≥—ç—ç—Ä—ç–π.");
    }

    function addComment(id, text) {
        const post = posts.find(p => p.id === id);
        post.comments.push({ user: "–ë–∏", text: text });
        renderPosts();
    }
</script>

</body>
</html>
